
# Постановка задачи.
Необходимо разработать графическое приложение способное импортировать XML-файлы и отображать их содержимое в табличной форме с использованием MVC(Model-View-Controller).
Основные требования:
1.	Основное окно пользовательского интерфейса должно представлять из себя таблицу(QTableView(!)) и набор кнопок(очистить таблицу, импортировать данные);
2.	Содержимое таблицы (должно загружаться из БД(SQLite)) должно отображаться благодаря кастомной табличной модели данных (QAbstractTableModel(!), не QSqlTableModel), все изменения в таблице(удаление и импорт записей) должны обновляться и в БД. Работа с БД должна вестись в отдельном потоке, не блокируя пользовательский интерфейс;
3.	При импорте записей пользователь выбирает папку с XML-файлами(пример структуры загружаемых файлов в каталоге TestFolder);
4.	Импорт файлов должен происходить в отдельном потоке. При парсинге предусмотреть окно прогресса с отображением количества успешно импортированных записей, ошибок и имён файлов, содержащих ошибки; 
5.	Используя контекстное меню, записи в таблице должны удаляться, редактироваться, экспортироваться в XML-файл;
6.	При первом запуске или при отсутствии файла БД(файл должен находиться в том же каталоге, что и исполняемый файл) должен создаваться новый.

P.S. Реализация хранения (чтение и запись) данных в БД – дополнительное задание.


# Решение.
MVC взаимодействие cхематично показано на ```MVC схема.png```. 
Программа работает в 2х потоках: поток GUI и поток для взаимодействия с бд и файлами xml.



Описание кнопок:
#### Импорт xml
1) Из основного потока вызывается myThread::exportXml()
2) Считывается указанная папка: собираются все .xml файлы, проверяются, валидны ли они, собирается новый
3) Собирается новая модель: берутся прежние эдиторы, берутся новые эдиторы, если новый эдитор не дубликат, то добавляется в содель и загружается в БД MyDB::Insert(EditorModel)
4) Отправляется сигнал в основной поток emit myThread::dataLoaded(myModel) с новой моделью для QTableView

#### Импортировать c БД
1) Создает поток myThread, в котором есть класс взаимодействия с БД - MyDB, модель для QTableView MySQLModel
2) Вызывается метод myThread::LoadDB()
3) Отправляется сигнал в основной поток emit myThread::dataLoaded(myModel) с новой моделью для QTableView

#### Очистить таблицу
Удаляет содержимое QTableView

#### Контекстное меню
##### Удалить эдитор
ПКМ по элементу таблицы - контекстное меню с кнопкой удалить
1) Определяется, какой ряд требуется удалить
2) Вызывается потока управления БД myThread::rmEditor(EditorModel) 
3) Из потока вызывается MyDB::Delete(EditorModel)
4) Эдиторы в таблице обновляются через сигнал emit myThread::dataLoaded(myModel)
##### Изменить эдитор
1) Вызывается окно
2) Если нажата кнопка принять изменения вызывается метод MyDB::Update
3) Данные в таблице обновляются
##### Экспортировать эдитор
1) Вызывается метод myThread::ExportToXML
2) В папке с xml появляется новая запись.

#### Двойной клик по ячейке
 Позволяет изменять значение в таблице и передает изменения в БД.

# Запросы к БД и модель эдитора
Модель эдитора не включает в себя id. Взаимодействие с БД ведется через описание записи, поэтому программой требуется отсутствие дубликатов в таблице.








